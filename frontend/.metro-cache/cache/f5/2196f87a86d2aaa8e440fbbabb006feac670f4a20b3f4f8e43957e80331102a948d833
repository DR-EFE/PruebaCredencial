{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../lib/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":43,"index":122}}],"key":"phU7YuntQKgoAYKWKHVlsIL7LCY=","exportNames":["*"],"imports":1}},{"name":"../store/useAuthStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":123},"end":{"line":3,"column":53,"index":176}}],"key":"h7uH8UCvHDKfyfnPDiYXJh4fczY=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _libSupabase = require(_dependencyMap[1], \"../lib/supabase\");\n  var _storeUseAuthStore = require(_dependencyMap[2], \"../store/useAuthStore\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    session: null,\n    loading: true\n  });\n  const useAuth = () => (0, _react.useContext)(AuthContext);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [session, setSession] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const {\n      setUser,\n      setProfesor,\n      setLoading: setStoreLoading\n    } = (0, _storeUseAuthStore.useAuthStore)();\n    (0, _react.useEffect)(() => {\n      // Obtener sesión inicial\n      _libSupabase.supabase.auth.getSession().then(({\n        data: {\n          session\n        }\n      }) => {\n        setSession(session);\n        setUser(session?.user ?? null);\n        if (session?.user) {\n          // Cargar datos del profesor\n          loadProfesor(session.user.id);\n        } else {\n          setLoading(false);\n          setStoreLoading(false);\n        }\n      });\n\n      // Escuchar cambios de autenticación\n      const {\n        data: {\n          subscription\n        }\n      } = _libSupabase.supabase.auth.onAuthStateChange((_event, session) => {\n        setSession(session);\n        setUser(session?.user ?? null);\n        if (session?.user) {\n          loadProfesor(session.user.id);\n        } else {\n          setProfesor(null);\n          setLoading(false);\n          setStoreLoading(false);\n        }\n      });\n      return () => subscription.unsubscribe();\n    }, []);\n    const loadProfesor = async userId => {\n      try {\n        const {\n          data,\n          error\n        } = await _libSupabase.supabase.from('profesores').select('*').eq('id', userId).single();\n        if (error) throw error;\n        setProfesor(data);\n      } catch (error) {\n        console.error('Error loading profesor:', error);\n        setProfesor(null);\n      } finally {\n        setLoading(false);\n        setStoreLoading(false);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        session,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }, this);\n  };\n});","lineCount":103,"map":[[8,2,16,0,"Object"],[8,8,16,0],[8,9,16,0,"defineProperty"],[8,23,16,0],[8,24,16,0,"exports"],[8,31,16,0],[9,4,16,0,"enumerable"],[9,14,16,0],[10,4,16,0,"get"],[10,7,16,0],[10,18,16,0,"get"],[10,19,16,0],[11,6,16,0],[11,13,16,0,"useAuth"],[11,20,16,0],[12,4,16,0],[13,2,16,0],[14,2,18,0,"Object"],[14,8,18,0],[14,9,18,0,"defineProperty"],[14,23,18,0],[14,24,18,0,"exports"],[14,31,18,0],[15,4,18,0,"enumerable"],[15,14,18,0],[16,4,18,0,"get"],[16,7,18,0],[16,18,18,0,"get"],[16,19,18,0],[17,6,18,0],[17,13,18,0,"AuthProvider"],[17,25,18,0],[18,4,18,0],[19,2,18,0],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,2,0],[21,6,2,0,"_libSupabase"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,6,3,0,"_storeUseAuthStore"],[22,24,3,0],[22,27,3,0,"require"],[22,34,3,0],[22,35,3,0,"_dependencyMap"],[22,49,3,0],[23,2,3,53],[23,6,3,53,"_reactJsxDevRuntime"],[23,25,3,53],[23,28,3,53,"require"],[23,35,3,53],[23,36,3,53,"_dependencyMap"],[23,50,3,53],[24,2,11,0],[24,8,11,6,"AuthContext"],[24,19,11,17],[24,35,11,20],[24,39,11,20,"createContext"],[24,45,11,33],[24,46,11,33,"createContext"],[24,59,11,33],[24,61,11,51],[25,4,12,2,"session"],[25,11,12,9],[25,13,12,11],[25,17,12,15],[26,4,13,2,"loading"],[26,11,13,9],[26,13,13,11],[27,2,14,0],[27,3,14,1],[27,4,14,2],[28,2,16,7],[28,8,16,13,"useAuth"],[28,15,16,20],[28,18,16,23,"useAuth"],[28,19,16,23],[28,24,16,29],[28,28,16,29,"useContext"],[28,34,16,39],[28,35,16,39,"useContext"],[28,45,16,39],[28,47,16,40,"AuthContext"],[28,58,16,51],[28,59,16,52],[29,2,18,7],[29,8,18,13,"AuthProvider"],[29,20,18,25],[29,23,18,28,"AuthProvider"],[29,24,18,29],[30,4,18,31,"children"],[31,2,18,71],[31,3,18,72],[31,8,18,77],[32,4,19,2],[32,10,19,8],[32,11,19,9,"session"],[32,18,19,16],[32,20,19,18,"setSession"],[32,30,19,28],[32,31,19,29],[32,34,19,32],[32,38,19,32,"useState"],[32,44,19,40],[32,45,19,40,"useState"],[32,53,19,40],[32,55,19,57],[32,59,19,61],[32,60,19,62],[33,4,20,2],[33,10,20,8],[33,11,20,9,"loading"],[33,18,20,16],[33,20,20,18,"setLoading"],[33,30,20,28],[33,31,20,29],[33,34,20,32],[33,38,20,32,"useState"],[33,44,20,40],[33,45,20,40,"useState"],[33,53,20,40],[33,55,20,41],[33,59,20,45],[33,60,20,46],[34,4,21,2],[34,10,21,8],[35,6,21,10,"setUser"],[35,13,21,17],[36,6,21,19,"setProfesor"],[36,17,21,30],[37,6,21,32,"setLoading"],[37,16,21,42],[37,18,21,44,"setStoreLoading"],[38,4,21,60],[38,5,21,61],[38,8,21,64],[38,12,21,64,"useAuthStore"],[38,30,21,76],[38,31,21,76,"useAuthStore"],[38,43,21,76],[38,45,21,77],[38,46,21,78],[39,4,23,2],[39,8,23,2,"useEffect"],[39,14,23,11],[39,15,23,11,"useEffect"],[39,24,23,11],[39,26,23,12],[39,32,23,18],[40,6,24,4],[41,6,25,4,"supabase"],[41,18,25,12],[41,19,25,12,"supabase"],[41,27,25,12],[41,28,25,13,"auth"],[41,32,25,17],[41,33,25,18,"getSession"],[41,43,25,28],[41,44,25,29],[41,45,25,30],[41,46,25,31,"then"],[41,50,25,35],[41,51,25,36],[41,52,25,37],[42,8,25,39,"data"],[42,12,25,43],[42,14,25,45],[43,10,25,47,"session"],[44,8,25,55],[45,6,25,57],[45,7,25,58],[45,12,25,63],[46,8,26,6,"setSession"],[46,18,26,16],[46,19,26,17,"session"],[46,26,26,24],[46,27,26,25],[47,8,27,6,"setUser"],[47,15,27,13],[47,16,27,14,"session"],[47,23,27,21],[47,25,27,23,"user"],[47,29,27,27],[47,33,27,31],[47,37,27,35],[47,38,27,36],[48,8,29,6],[48,12,29,10,"session"],[48,19,29,17],[48,21,29,19,"user"],[48,25,29,23],[48,27,29,25],[49,10,30,8],[50,10,31,8,"loadProfesor"],[50,22,31,20],[50,23,31,21,"session"],[50,30,31,28],[50,31,31,29,"user"],[50,35,31,33],[50,36,31,34,"id"],[50,38,31,36],[50,39,31,37],[51,8,32,6],[51,9,32,7],[51,15,32,13],[52,10,33,8,"setLoading"],[52,20,33,18],[52,21,33,19],[52,26,33,24],[52,27,33,25],[53,10,34,8,"setStoreLoading"],[53,25,34,23],[53,26,34,24],[53,31,34,29],[53,32,34,30],[54,8,35,6],[55,6,36,4],[55,7,36,5],[55,8,36,6],[57,6,38,4],[58,6,39,4],[58,12,39,10],[59,8,39,12,"data"],[59,12,39,16],[59,14,39,18],[60,10,39,20,"subscription"],[61,8,39,33],[62,6,39,35],[62,7,39,36],[62,10,39,39,"supabase"],[62,22,39,47],[62,23,39,47,"supabase"],[62,31,39,47],[62,32,39,48,"auth"],[62,36,39,52],[62,37,39,53,"onAuthStateChange"],[62,54,39,70],[62,55,39,71],[62,56,39,72,"_event"],[62,62,39,78],[62,64,39,80,"session"],[62,71,39,87],[62,76,39,92],[63,8,40,6,"setSession"],[63,18,40,16],[63,19,40,17,"session"],[63,26,40,24],[63,27,40,25],[64,8,41,6,"setUser"],[64,15,41,13],[64,16,41,14,"session"],[64,23,41,21],[64,25,41,23,"user"],[64,29,41,27],[64,33,41,31],[64,37,41,35],[64,38,41,36],[65,8,43,6],[65,12,43,10,"session"],[65,19,43,17],[65,21,43,19,"user"],[65,25,43,23],[65,27,43,25],[66,10,44,8,"loadProfesor"],[66,22,44,20],[66,23,44,21,"session"],[66,30,44,28],[66,31,44,29,"user"],[66,35,44,33],[66,36,44,34,"id"],[66,38,44,36],[66,39,44,37],[67,8,45,6],[67,9,45,7],[67,15,45,13],[68,10,46,8,"setProfesor"],[68,21,46,19],[68,22,46,20],[68,26,46,24],[68,27,46,25],[69,10,47,8,"setLoading"],[69,20,47,18],[69,21,47,19],[69,26,47,24],[69,27,47,25],[70,10,48,8,"setStoreLoading"],[70,25,48,23],[70,26,48,24],[70,31,48,29],[70,32,48,30],[71,8,49,6],[72,6,50,4],[72,7,50,5],[72,8,50,6],[73,6,52,4],[73,13,52,11],[73,19,52,17,"subscription"],[73,31,52,29],[73,32,52,30,"unsubscribe"],[73,43,52,41],[73,44,52,42],[73,45,52,43],[74,4,53,2],[74,5,53,3],[74,7,53,5],[74,9,53,7],[74,10,53,8],[75,4,55,2],[75,10,55,8,"loadProfesor"],[75,22,55,20],[75,25,55,23],[75,31,55,30,"userId"],[75,37,55,44],[75,41,55,49],[76,6,56,4],[76,10,56,8],[77,8,57,6],[77,14,57,12],[78,10,57,14,"data"],[78,14,57,18],[79,10,57,20,"error"],[80,8,57,26],[80,9,57,27],[80,12,57,30],[80,18,57,36,"supabase"],[80,30,57,44],[80,31,57,44,"supabase"],[80,39,57,44],[80,40,58,9,"from"],[80,44,58,13],[80,45,58,14],[80,57,58,26],[80,58,58,27],[80,59,59,9,"select"],[80,65,59,15],[80,66,59,16],[80,69,59,19],[80,70,59,20],[80,71,60,9,"eq"],[80,73,60,11],[80,74,60,12],[80,78,60,16],[80,80,60,18,"userId"],[80,86,60,24],[80,87,60,25],[80,88,61,9,"single"],[80,94,61,15],[80,95,61,16],[80,96,61,17],[81,8,63,6],[81,12,63,10,"error"],[81,17,63,15],[81,19,63,17],[81,25,63,23,"error"],[81,30,63,28],[82,8,64,6,"setProfesor"],[82,19,64,17],[82,20,64,18,"data"],[82,24,64,22],[82,25,64,23],[83,6,65,4],[83,7,65,5],[83,8,65,6],[83,15,65,13,"error"],[83,20,65,18],[83,22,65,20],[84,8,66,6,"console"],[84,15,66,13],[84,16,66,14,"error"],[84,21,66,19],[84,22,66,20],[84,47,66,45],[84,49,66,47,"error"],[84,54,66,52],[84,55,66,53],[85,8,67,6,"setProfesor"],[85,19,67,17],[85,20,67,18],[85,24,67,22],[85,25,67,23],[86,6,68,4],[86,7,68,5],[86,16,68,14],[87,8,69,6,"setLoading"],[87,18,69,16],[87,19,69,17],[87,24,69,22],[87,25,69,23],[88,8,70,6,"setStoreLoading"],[88,23,70,21],[88,24,70,22],[88,29,70,27],[88,30,70,28],[89,6,71,4],[90,4,72,2],[90,5,72,3],[91,4,74,2],[91,24,75,4],[91,28,75,4,"_reactJsxDevRuntime"],[91,47,75,4],[91,48,75,4,"jsxDEV"],[91,54,75,4],[91,56,75,5,"AuthContext"],[91,67,75,16],[91,68,75,17,"Provider"],[91,76,75,25],[92,6,75,26,"value"],[92,11,75,31],[92,13,75,33],[93,8,75,35,"session"],[93,15,75,42],[94,8,75,44,"loading"],[95,6,75,52],[95,7,75,54],[96,6,75,54,"children"],[96,14,75,54],[96,16,76,7,"children"],[97,4,76,15],[98,6,76,15,"fileName"],[98,14,76,15],[98,16,76,15,"_jsxFileName"],[98,28,76,15],[99,6,76,15,"lineNumber"],[99,16,76,15],[100,6,76,15,"columnNumber"],[100,18,76,15],[101,4,76,15],[101,11,77,26],[101,12,77,27],[102,2,79,0],[102,3,79,1],[103,0,79,2],[103,3]],"functionMap":{"names":["<global>","useAuth","AuthProvider","useEffect$argument_0","supabase.auth.getSession.then$argument_0","supabase.auth.onAuthStateChange$argument_0","<anonymous>","loadProfesor"],"mappings":"AAA;uBCe,6BD;4BEE;YCK;oCCE;KDW;uEEG;KFW;WGE,gCH;GDC;uBKE;GLiB;CFO"},"hasCjsExports":false},"type":"js/module"}]}